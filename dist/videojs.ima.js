!function(t){if("function"==typeof define&&define.amd)define(["video.js","videojs-contrib-ads"],function(e){t(window,document,e)});else if("object"==typeof exports&&"object"==typeof module){var e=require("video.js");require("videojs-contrib-ads"),t(window,document,e)}else t(window,document,videojs)}(function(t,e,i){"use strict";i=i.default||i;var n=function(t){this.controller=t,this.adDisplayContainer=null,this.adDisplayContainerInitialized=!1,this.adsLoader=null,this.adsManager=null,this.adsRenderingSettings=null,this.adTagUrl=null,this.adsResponse=null,this.currentAd=null,this.adTrackingTimer=null,this.allAdsCompleted=!1,this.adsActive=!1,this.adPlaying=!1,this.adMuted=!1,this.adBreakReadyListener=void 0,this.contentCompleteCalled=!1,this.adsManagerDimensions={width:0,height:0},this.autoPlayAdBreaks=!0,!1===this.controller.getSettings().autoPlayAdBreaks&&(this.autoPlayAdBreaks=!1),this.controller.getSettings().locale&&google.ima.settings.setLocale(this.controller.getSettings().locale),this.controller.getSettings().disableFlashAds&&google.ima.settings.setDisableFlashAds(this.controller.getSettings().disableFlashAds),this.controller.getSettings().disableCustomPlaybackForIOS10Plus&&google.ima.settings.setDisableCustomPlaybackForIOS10Plus(this.controller.getSettings().disableCustomPlaybackForIOS10Plus),this.initAdObjects(),(this.controller.getSettings().adTagUrl||this.controller.getSettings().adsResponse)&&this.requestAds()};n.prototype.initAdObjects=function(){this.adDisplayContainer=new google.ima.AdDisplayContainer(this.controller.getAdContainerDiv(),this.controller.getContentPlayer()),this.adsLoader=new google.ima.AdsLoader(this.adDisplayContainer),this.adsLoader.getSettings().setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),0==this.controller.getSettings().vpaidAllowed&&this.adsLoader.getSettings().setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.DISABLED),this.controller.getSettings().vpaidMode&&this.adsLoader.getSettings().setVpaidMode(this.controller.getSettings().vpaidMode),this.controller.getSettings().locale&&this.adsLoader.getSettings().setLocale(this.controller.getSettings.locale),this.controller.getSettings().numRedirects&&this.adsLoader.getSettings().setNumRedirects(this.controller.getSettings.numRedirects),this.adsLoader.getSettings().setPlayerType("videojs-ima"),this.adsLoader.getSettings().setPlayerVersion(a.VERSION),this.adsLoader.getSettings().setAutoPlayAdBreaks(this.autoPlayAdBreaks),this.adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoaded_.bind(this),!1),this.adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdsLoaderError_.bind(this),!1)},n.prototype.requestAds=function(){var t=new google.ima.AdsRequest;this.controller.getSettings().adTagUrl?t.adTagUrl=this.controller.getSettings().adTagUrl:t.adsResponse=this.controller.getSettings().adsResponse,this.controller.getSettings().forceNonLinearFullSlot&&(t.forceNonLinearFullSlot=!0),t.linearAdSlotWidth=this.controller.getPlayerWidth(),t.linearAdSlotHeight=this.controller.getPlayerHeight(),t.nonLinearAdSlotWidth=this.controller.getSettings().nonLinearWidth||this.controller.getPlayerWidth(),t.nonLinearAdSlotHeight=this.controller.getSettings().nonLinearHeight||this.controller.getPlayerHeight()/3,t.setAdWillAutoPlay(this.controller.getSettings().adWillAutoPlay),this.adsLoader.requestAds(t)},n.prototype.onAdsManagerLoaded_=function(t){this.createAdsRenderingSettings_(),this.adsManager=t.getAdsManager(this.controller.getContentPlayheadTracker(),this.adsRenderingSettings),this.adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError_.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.AD_BREAK_READY,this.onAdBreakReady_.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.onContentPauseRequested_.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.onContentResumeRequested_.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,this.onAllAdsCompleted_.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.LOADED,this.onAdLoaded_.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.STARTED,this.onAdStarted_.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.CLICK,this.onAdPaused_.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.COMPLETE,this.onAdComplete_.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.SKIPPED,this.onAdComplete_.bind(this)),this.isMobile&&(this.adsManager.addEventListener(google.ima.AdEvent.Type.PAUSED,this.onAdPaused_.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.RESUMED,this.onAdResumed_.bind(this))),this.autoPlayAdBreaks||this.initAdsManager(),this.controller.onAdsReady(),this.controller.getSettings().adsManagerLoadedCallback&&this.controller.getSettings().adsManagerLoadedCallback()},n.prototype.onAdsLoaderError_=function(e){t.console.warn("AdsLoader error: "+e.getError()),this.controller.onErrorLoadingAds(e),this.adsManager&&this.adsManager.destroy()},n.prototype.initAdsManager=function(){try{var t=this.controller.getPlayerWidth(),e=this.controller.getPlayerHeight();this.adsManagerDimensions.width=t,this.adsManagerDimensions.height=e,this.adsManager.init(t,e,google.ima.ViewMode.NORMAL),this.adsManager.setVolume(this.controller.getPlayerVolume()),this.adDisplayContainerInitialized||(this.adDisplayContainer.initialize(),this.adDisplayContainer.initialized=!0)}catch(t){this.onAdError_(t)}},n.prototype.createAdsRenderingSettings_=function(){if(this.adsRenderingSettings=new google.ima.AdsRenderingSettings,this.adsRenderingSettings.restoreCustomPlaybackStateOnAdBreakComplete=!0,this.controller.getSettings().adsRenderingSettings)for(var t in this.controller.getSettings().adsRenderingSettings)this.adsRenderingSettings[t]=this.controller.getSettings().adsRenderingSettings[t]},n.prototype.onAdError_=function(e){var i=void 0!==e.getError?e.getError():e.stack;t.console.warn("Ad error: "+i),this.adsManager.destroy(),this.controller.onAdError(e)},n.prototype.onAdBreakReady_=function(t){this.adBreakReadyListener(t)},n.prototype.onContentPauseRequested_=function(t){this.adsActive=!0,this.adPlaying=!0,this.controller.onAdBreakStart(t)},n.prototype.onContentResumeRequested_=function(t){this.adsActive=!1,this.adPlaying=!1,this.controller.onAdBreakEnd()},n.prototype.onAllAdsCompleted_=function(t){this.allAdsCompleted=!0,this.controller.onAllAdsCompleted()},n.prototype.onAdLoaded_=function(t){t.getAd().isLinear()||(this.controller.onNonLinearAdLoad(),this.controller.playContent())},n.prototype.onAdStarted_=function(t){this.currentAd=t.getAd(),this.currentAd.isLinear()?(this.adTrackingTimer=setInterval(this.onAdPlayheadTrackerInterval_.bind(this),250),this.controller.onLinearAdStart()):this.controller.onNonLinearAdStart()},n.prototype.onAdPaused_=function(){this.controller.onAdsPaused()},n.prototype.onAdResumed_=function(t){this.controller.onAdsResumed()},n.prototype.onAdComplete_=function(){this.currentAd.isLinear()&&clearInterval(this.adTrackingTimer)},n.prototype.onAdPlayheadTrackerInterval_=function(){var t=this.adsManager.getRemainingTime(),e=this.currentAd.getDuration(),i=e-t;i=i>0?i:0;var n,s=0;this.currentAd.getAdPodInfo()&&(!0,n=this.currentAd.getAdPodInfo().getAdPosition(),s=this.currentAd.getAdPodInfo().getTotalAds()),this.controller.onAdPlayheadUpdated(i,e,n,s)},n.prototype.onContentComplete=function(){this.adsLoader&&(this.adsLoader.contentComplete(),this.contentCompleteCalled=!0),this.allAdsCompleted&&this.controller.onContentAndAdsCompleted()},n.prototype.onPlayerDisposed=function(){this.adTrackingTimer&&clearInterval(this.adTrackingTimer),this.adsManager&&(this.adsManager.destroy(),this.adsManager=null)},n.prototype.onPlayerReadyForPreroll=function(){if(this.autoPlayAdBreaks){this.initAdsManager();try{this.controller.showAdContainer(),this.adsManager.start()}catch(t){this.onAdError_(t)}}},n.prototype.onPlayerEnterFullscreen=function(){this.adsManager&&this.adsManager.resize(t.screen.width,t.screen.height,google.ima.ViewMode.FULLSCREEN)},n.prototype.onPlayerExitFullscreen=function(){this.adsManager&&this.adsManager.resize(this.controller.getPlayerWidth(),this.controller.getPlayerHeight(),google.ima.ViewMode.NORMAL)},n.prototype.onPlayerVolumeChanged=function(t){this.adsManager&&this.adsManager.setVolume(t),this.adMuted=0==t},n.prototype.getCurrentAd=function(){return this.currentAd},n.prototype.setAdBreakReadyListener=function(t){this.adBreakReadyListener=t},n.prototype.isAdPlaying=function(){return this.adPlaying},n.prototype.isAdMuted=function(){return this.adMuted},n.prototype.pauseAds=function(){this.adsManager.pause(),this.adPlaying=!1},n.prototype.resumeAds=function(){this.adsManager.resume(),this.adPlaying=!0},n.prototype.unmute=function(){this.adsManager.setVolume(1),this.adMuted=!1},n.prototype.mute=function(){this.adsManager.setVolume(0),this.adMuted=!0},n.prototype.setVolume=function(t){this.adsManager.setVolume(t),this.adMuted=0==t},n.prototype.initializeAdDisplayContainer=function(){this.adDisplayContainerInitialized=!0,this.adDisplayContainer.initialize()},n.prototype.playAdBreak=function(){this.autoPlayAdBreaks||(this.controller.showAdContainer(),this.adsManager.start())},n.prototype.addEventListener=function(t,e){this.adsManager&&this.adsManager.addEventListener(t,e)},n.prototype.getAdsManager=function(){return this.adsManager},n.prototype.reset=function(){this.adsActive=!1,this.adPlaying=!1,this.adTrackingTimer&&clearInterval(this.adTrackingTimer),this.adsManager&&(this.adsManager.destroy(),this.adsManager=null),this.adsLoader&&!this.contentCompleteCalled&&this.adsLoader.contentComplete(),this.contentCompleteCalled=!1,this.allAdsCompleted=!1};var s=function(t){this.controller=t,this.adContainerDiv=e.createElement("div"),this.controlsDiv=e.createElement("div"),this.countdownDiv=e.createElement("div"),this.seekBarDiv=e.createElement("div"),this.progressDiv=e.createElement("div"),this.playPauseDiv=e.createElement("div"),this.muteDiv=e.createElement("div"),this.sliderDiv=e.createElement("div"),this.sliderLevelDiv=e.createElement("div"),this.fullscreenDiv=e.createElement("div"),this.boundOnMouseUp=this.onMouseUp_.bind(this),this.boundOnMouseUp=this.onMouseMove_.bind(this),this.adPlayheadTracker={currentTime:0,duration:0,isPod:!1,adPosition:0,totalAds:0},this.controlPrefix=this.controller.getSettings().id+"_"||"",this.showCountdown=!0,0==this.controller.getSettings().showCountdown&&(this.showCountdown=!1),this.createAdContainer_()};s.prototype.createAdContainer_=function(){this.assignControlAttributes_(this.adContainerDiv,"ima-ad-container"),this.adContainerDiv.style.position="absolute",this.adContainerDiv.style.zIndex=1111,this.adContainerDiv.addEventListener("mouseenter",this.showAdControls_.bind(this),!1),this.adContainerDiv.addEventListener("mouseleave",this.hideAdControls_.bind(this),!1),this.createControls_(),this.controller.injectAdContainerDiv(this.adContainerDiv)},s.prototype.createControls_=function(){this.assignControlAttributes_(this.controlsDiv,"ima-controls-div"),this.controlsDiv.style.width="100%",this.assignControlAttributes_(this.countdownDiv,"ima-countdown-div"),this.countdownDiv.innerHTML=this.controller.getSettings().adLabel,this.countdownDiv.style.display=this.showCountdown?"block":"none",this.assignControlAttributes_(this.seekBarDiv,"ima-seek-bar-div"),this.seekBarDiv.style.width="100%",this.assignControlAttributes_(this.progressDiv,"ima-progress-div"),this.assignControlAttributes_(this.playPauseDiv,"ima-play-pause-div"),this.addClass_(this.playPauseDiv,"ima-playing"),this.playPauseDiv.addEventListener("click",this.onAdPlayPauseClick_.bind(this),!1),this.assignControlAttributes_(this.muteDiv,"ima-mute-div"),this.addClass_(this.muteDiv,"ima-non-muted"),this.muteDiv.addEventListener("click",this.onAdMuteClick_.bind(this),!1),this.assignControlAttributes_(this.sliderDiv,"ima-slider-div"),this.sliderDiv.addEventListener("mousedown",this.onAdVolumeSliderMouseDown_.bind(this),!1),this.assignControlAttributes_(this.sliderLevelDiv,"ima-slider-level-div"),this.assignControlAttributes_(this.fullscreenDiv,"ima-fullscreen-div"),this.addClass_(this.fullscreenDiv,"ima-non-fullscreen"),this.fullscreenDiv.addEventListener("click",this.onAdFullscreenClick_.bind(this),!1),this.adContainerDiv.appendChild(this.controlsDiv),this.controlsDiv.appendChild(this.countdownDiv),this.controlsDiv.appendChild(this.seekBarDiv),this.controlsDiv.appendChild(this.playPauseDiv),this.controlsDiv.appendChild(this.muteDiv),this.controlsDiv.appendChild(this.sliderDiv),this.controlsDiv.appendChild(this.fullscreenDiv),this.seekBarDiv.appendChild(this.progressDiv),this.sliderDiv.appendChild(this.sliderLevelDiv)},s.prototype.onAdPlayPauseClick_=function(){this.controller.onAdPlayPauseClick()},s.prototype.onAdMuteClick_=function(){this.controller.onAdMuteClick()},s.prototype.onAdFullscreenClick_=function(){this.controller.toggleFullscreen()},s.prototype.onAdsPaused=function(){this.addClass_(this.playPauseDiv,"ima-paused"),this.removeClass_(this.playPauseDiv,"ima-playing"),this.showAdControls_()},s.prototype.onAdsResumed=function(){this.onAdsPlaying(),this.showAdControls_()},s.prototype.onAdsPlaying=function(){this.addClass_(this.playPauseDiv,"ima-playing"),this.removeClass_(this.playPauseDiv,"ima-paused")},s.prototype.updateAdUi=function(t,e,i,n){var s=e-t,o=Math.floor(s/60),r=Math.floor(s%60);r.toString().length<2&&(r="0"+r);var a=": ";n>1&&(a=" ("+i+" of "+n+"): "),this.countdownDiv.innerHTML=this.controller.getSettings().adLabel+a+o+":"+r;var d=100*(t/e);this.progressDiv.style.width=d+"%"},s.prototype.unmute=function(){this.addClass_(this.muteDiv,"ima-non-muted"),this.removeClass_(this.muteDiv,"ima-muted"),this.sliderLevelDiv.style.width=100*this.controller.getPlayerVolume()+"%"},s.prototype.mute=function(){this.addClass_(this.muteDiv,"ima-muted"),this.removeClass_(this.muteDiv,"ima-non-muted"),this.sliderLevelDiv.style.width="0%"},s.prototype.onAdVolumeSliderMouseDown_=function(){e.addEventListener("mouseup",this.boundOnMouseUp,!1),e.addEventListener("mousemove",this.boundOnMouseMove,!1)},s.prototype.onMouseMove_=function(t){this.changeVolume_(t)},s.prototype.onMouseUp_=function(t){this.changeVolume_(t),e.removeEventListener("mouseup",this.boundOnMouseUp),e.removeEventListener("mousemove",this.boundOnMouseMove)},s.prototype.changeVolume_=function(t){var e=(t.clientX-this.sliderDiv.getBoundingClientRect().left)/this.sliderDiv.offsetWidth;e*=100,e=Math.min(Math.max(e,0),100),this.sliderLevelDiv.style.width=e+"%",0==this.percent?(this.addClass_(this.muteDiv,"ima-muted"),this.removeClass_(this.muteDiv,"ima-non-muted")):(this.addClass_(this.muteDiv,"ima-non-muted"),this.removeClass_(this.muteDiv,"ima-muted")),this.controller.setVolume(e/100)},s.prototype.showAdContainer=function(){this.adContainerDiv.style.display="block"},s.prototype.onAdError=function(){this.adContainerDiv.style.display="none"},s.prototype.onAdBreakStart=function(t){this.adContainerDiv.style.display="block";"application/javascript"!==t.getAd().getContentType()||this.controller.getSettings().showControlsForJSAds?this.controlsDiv.style.display="block":this.controlsDiv.style.display="none",this.onAdsPlaying(),this.hideAdControls_()},s.prototype.onAdBreakEnd=function(){var t=this.controller.getCurrentAd();(null==t||t.isLinear())&&(this.adContainerDiv.style.display="none"),this.controlsDiv.style.display="none",this.countdownDiv.innerHTML=""},s.prototype.onAllAdsCompleted=function(){this.adContainerDiv.style.display="none"},s.prototype.onLinearAdStart=function(){this.removeClass_(this.adContainerDiv,"bumpable-ima-ad-container")},s.prototype.onNonLinearAdLoad=function(){this.adContainerDiv.style.display="block",this.addClass_(this.adContainerDiv,"bumpable-ima-ad-container")},s.prototype.onPlayerResize=function(t,e){this.adsManager&&(this.adsManagerDimensions.width=t,this.adsManagerDimensions.height=e,this.adsManager.resize(t,e,google.ima.ViewMode.NORMAL))},s.prototype.onPlayerEnterFullscreen=function(){this.addClass_(this.fullscreenDiv,"ima-fullscreen"),this.removeClass_(this.fullscreenDiv,"ima-non-fullscreen")},s.prototype.onPlayerExitFullscreen=function(){this.addClass_(this.fullscreenDiv,"ima-non-fullscreen"),this.removeClass_(this.fullscreenDiv,"ima-fullscreen")},s.prototype.onPlayerVolumeChanged=function(t){0==t?(this.addClass_(this.muteDiv,"ima-muted"),this.removeClass_(this.muteDiv,"ima-non-muted"),this.sliderLevelDiv.style.width="0%"):(this.addClass_(this.muteDiv,"ima-non-muted"),this.removeClass_(this.muteDiv,"ima-muted"),this.sliderLevelDiv.style.width=100*t+"%")},s.prototype.showAdControls_=function(){this.controlsDiv.style.height="37px",this.playPauseDiv.style.display="block",this.muteDiv.style.display="block",this.sliderDiv.style.display="block",this.fullscreenDiv.style.display="block"},s.prototype.hideAdControls_=function(){this.controlsDiv.style.height="14px",this.playPauseDiv.style.display="none",this.muteDiv.style.display="none",this.sliderDiv.style.display="none",this.fullscreenDiv.style.display="none"},s.prototype.assignControlAttributes_=function(t,e){t.id=this.controlPrefix+e,t.className=this.controlPrefix+e+" "+e},s.prototype.getClassRegexp_=function(t){return new RegExp("(^|[^A-Za-z-])"+t+"((?![A-Za-z-])|$)","gi")},s.prototype.elementHasClass_=function(t,e){return this.getClassRegexp_(e).test(t.className)},s.prototype.addClass_=function(t,e){if(this.elementHasClass_(t,e))return t;t.className=t.className.trim()+" "+e},s.prototype.removeClass_=function(t,e){if(!this.elementHasClass_(t,e))return t;var i=this.getClassRegexp_(e);t.className=t.className.trim().replace(i,"")},s.prototype.getAdContainerDiv=function(){return this.adContainerDiv},s.prototype.setShowCountdown=function(t){this.showCountdown=t,this.countdownDiv.style.display=this.showCountdown?"block":"none"};var o=function(t,i,n){this.vjsPlayer=t,this.controller=n,this.contentTrackingTimer=null,this.contentComplete=!1,this.updateTimeIntervalHandle=null,this.updateTimeInterval=1e3,this.seekCheckIntervalHandle=null,this.seekCheckInterval=1e3,this.resizeCheckIntervalHandle=null,this.resizeCheckInterval=250,this.seekThreshold=100,this.contentEndedListeners=[],this.contentSource="",this.contentPlayheadTracker={currentTime:0,previousTime:0,seeking:!1,duration:0},this.vjsPlayerDimensions={width:this.getPlayerWidth(),height:this.getPlayerHeight()},this.vjsControls=this.vjsPlayer.getChild("controlBar"),this.h5Player=e.getElementById(this.controller.getSettings().id).getElementsByClassName("vjs-tech")[0],this.h5Player.hasAttribute("autoplay")&&this.controller.setSetting("adWillAutoPlay",!0),this.vjsPlayer.one("play",this.setUpPlayerIntervals.bind(this)),this.boundContentEndedListener=this.localContentEndedListener.bind(this),this.vjsPlayer.on("ended",this.boundContentEndedListener),this.vjsPlayer.on("dispose",this.playerDisposedListener.bind(this)),this.vjsPlayer.on("readyforpreroll",this.onReadyForPreroll.bind(this)),this.vjsPlayer.ready(this.onPlayerReady.bind(this)),this.vjsPlayer.ads(i)};o.prototype.setUpPlayerIntervals=function(){this.updateTimeIntervalHandle=setInterval(this.updateCurrentTime_.bind(this),this.updateTimeInterval),this.seekCheckIntervalHandle=setInterval(this.checkForSeeking_.bind(this),this.seekCheckInterval),this.resizeCheckIntervalHandle=setInterval(this.checkForResize_.bind(this),this.resizeCheckInterval)},o.prototype.updateCurrentTime_=function(){this.contentPlayheadTracker.seeking||(this.contentPlayheadTracker.currentTime=this.vjsPlayer.currentTime())},o.prototype.checkForSeeking_=function(){var t=1e3*(this.vjsPlayer.currentTime()-this.contentPlayheadTracker.previousTime);Math.abs(t)>this.seekCheckInterval+this.seekThreshold?this.contentPlayheadTracker.seeking=!0:this.contentPlayheadTracker.seeking=!1,this.contentPlayheadTracker.previousTime=this.vjsPlayer.currentTime()},o.prototype.checkForResize_=function(){var t=this.getPlayerWidth(),e=this.getPlayerHeight();t==this.vjsPlayerDimensions.width&&e==this.vjsPlayerDimensions.height||(this.vjsPlayerDimensions.width=t,this.vjsPlayerDimensions.height=e,this.controller.onPlayerResize())},o.prototype.localContentEndedListener=function(){this.contentComplete||(this.contentComplete=!0,this.controller.onContentComplete());for(var t in this.contentEndedListeners)this.contentEndedListeners[t]();clearInterval(this.updateTimeIntervalHandle),clearInterval(this.seekCheckIntervalHandle),clearInterval(this.resizeCheckIntervalHandle),this.vjsPlayer.el()&&this.vjsPlayer.one("play",this.setUpPlayerIntervals_.bind(this))},o.prototype.playerDisposedListener=function(){this.contentEndedListeners=[],this.controller.onPlayerDisposed(),this.contentComplete=!0,this.vjsPlayer.off("ended",this.localContentEndedListener),this.vjsPlayer.ads.adTimeoutTimeout&&clearTimeout(this.vjsPlayer.ads.adTimeoutTimeout);var t=[this.updateTimeIntervalHandle,this.seekCheckIntervalHandle,this.resizeCheckIntervalHandle];for(var e in t){var i=t[e];i&&clearInterval(i)}},o.prototype.onReadyForPreroll=function(){this.controller.onPlayerReadyForPreroll()},o.prototype.onPlayerReady=function(){this.vjsPlayer.on("fullscreenchange",this.onFullscreenChange_.bind(this)),this.vjsPlayer.on("volumechange",this.onVolumeChange_.bind(this))},o.prototype.onFullscreenChange_=function(){this.vjsPlayer.isFullscreen()?this.controller.onPlayerEnterFullscreen():this.controller.onPlayerExitFullscreen()},o.prototype.onVolumeChange_=function(){var t=this.vjsPlayer.muted()?0:this.vjsPlayer.volume();this.controller.onPlayerVolumeChanged(t)},o.prototype.injectAdContainerDiv=function(t){this.vjsControls.el().parentNode.appendChild(t)},o.prototype.getContentPlayer=function(){return this.h5Player},o.prototype.getVolume=function(){return this.vjsPlayer.volume()},o.prototype.setVolume=function(t){this.vjsPlayer.volume(t),0==t?this.vjsPlayer.muted(!0):this.vjsPlayer.muted(!1)},o.prototype.unmute=function(){this.vjsPlayer.muted(!1)},o.prototype.mute=function(){this.vjsPlayer.muted(!0)},o.prototype.play=function(){this.vjsPlayer.play()},o.prototype.getPlayerWidth=function(){var t=this.vjsPlayer.el().getBoundingClientRect()||{};return parseInt(t.width,10)||this.vjsPlayer.width()},o.prototype.getPlayerHeight=function(){var t=this.vjsPlayer.el().getBoundingClientRect()||{};return parseInt(t.height,10)||this.vjsPlayer.height()},o.prototype.toggleFullscreen=function(){this.vjsPlayer.isFullscreen()?this.vjsPlayer.exitFullscreen():this.vjsPlayer.requestFullscreen()},o.prototype.getContentPlayheadTracker=function(){return this.contentPlayheadTracker},o.prototype.onAdError=function(t){this.vjsControls.show();var e=void 0!==t.getError?t.getError():t.stack;this.vjsPlayer.trigger({type:"adserror",data:{AdError:e,AdErrorEvent:t}})},o.prototype.onAdBreakStart=function(t){this.contentSource=this.vjsPlayer.currentSrc(),this.vjsPlayer.off("ended",this.boundContentEndedListener),-1!=t.getAd().getAdPodInfo().getPodIndex()&&this.vjsPlayer.ads.startLinearAdMode(),this.vjsControls.hide(),this.vjsPlayer.pause()},o.prototype.onAdBreakEnd=function(){this.vjsPlayer.on("ended",this.boundContentEndedListener);this.controller.getCurrentAd();this.vjsPlayer.ads.endLinearAdMode(),this.vjsControls.show()},o.prototype.onAdStart=function(){this.vjsPlayer.trigger("ads-ad-started")},o.prototype.onAllAdsCompleted=function(){1==this.contentComplete&&(this.h5Player.src!=this.contentSource&&this.vjsPlayer.src(this.contentSource),this.controller.onContentAndAdsCompleted())},o.prototype.onAdsReady=function(){this.vjsPlayer.trigger("adsready")},o.prototype.changeSource=function(t,e){this.vjsPlayer.currentSrc()&&(this.vjsPlayer.currentTime(0),this.vjsPlayer.pause()),t&&this.vjsPlayer.src(t),e?this.vjsPlayer.one("loadedmetadata",this.playContentFromZero_.bind(this)):this.vjsPlayer.one("loadedmetadata",this.seekContentToZero_.bind(this))},o.prototype.seekContentToZero_=function(){this.vjsPlayer.currentTime(0)},o.prototype.playContentFromZero_=function(){this.vjsPlayer.currentTime(0),this.vjsPlayer.play()},o.prototype.addContentEndedListener=function(t){this.contentEndedListeners.push(t)},o.prototype.reset=function(){this.vjsPlayer.on("ended",this.boundContentEndedListener),this.vjsControls.show(),this.vjsPlayer.ads.endLinearAdMode(),this.contentPlayheadTracker.currentTime=0};var r=function(t,e){this.settings={},this.contentAndAdsEndedListeners=[],this.isMobile=navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/Android/i),this.initWithSettings_(e);var i={debug:this.settings.debug,timeout:this.settings.timeout,prerollTimeout:this.settings.prerollTimeout},r=this.extend({},i,e.contribAdsSettings||{});this.playerWrapper=new o(t,r,this),this.adUi=new s(this),this.sdkImpl=new n(this)};r.IMA_DEFAULTS={debug:!1,timeout:5e3,prerollTimeout:1e3,adLabel:"Advertisement",showControlsForJSAds:!0},r.prototype.initWithSettings_=function(e){this.settings=this.extend({},r.IMA_DEFAULTS,e||{}),this.settings.id?(this.showCountdown=!0,!1===this.settings.showCountdown&&(this.showCountdown=!1)):t.console.error("Error: must provide id of video.js div")},r.prototype.getSettings=function(){return this.settings},r.prototype.injectAdContainerDiv=function(t){this.playerWrapper.injectAdContainerDiv(t)},r.prototype.getAdContainerDiv=function(){return this.adUi.getAdContainerDiv()},r.prototype.getContentPlayer=function(){return this.playerWrapper.getContentPlayer()},r.prototype.getContentPlayheadTracker=function(){return this.playerWrapper.getContentPlayheadTracker()},r.prototype.requestAds=function(){this.sdkImpl.requestAds()},r.prototype.setSetting=function(t,e){this.settings[t]=e},r.prototype.onErrorLoadingAds=function(t){this.adUi.onAdError(),this.playerWrapper.onAdError(t)},r.prototype.onAdPlayPauseClick=function(){this.sdkImpl.isAdPlaying()?(this.adUi.onAdsPaused(),this.sdkImpl.pauseAds()):(this.adUi.onAdsPlaying(),this.sdkImpl.resumeAds())},r.prototype.onAdMuteClick=function(){this.sdkImpl.isAdMuted()?(this.playerWrapper.unmute(),this.adUi.unmute(),this.sdkImpl.unmute()):(this.playerWrapper.mute(),this.adUi.mute(),this.sdkImpl.mute())},r.prototype.setVolume=function(t){this.playerWrapper.setVolume(t),this.sdkImpl.setVolume(t)},r.prototype.getPlayerVolume=function(){return this.playerWrapper.getVolume()},r.prototype.toggleFullscreen=function(){return this.playerWrapper.toggleFullscreen()},r.prototype.onAdError=function(t){this.adUi.onAdError(),this.playerWrapper.onAdError(t)},r.prototype.onAdBreakStart=function(t){this.playerWrapper.onAdBreakStart(t),this.adUi.onAdBreakStart(t)},r.prototype.showAdContainer=function(){this.adUi.showAdContainer()},r.prototype.onAdBreakEnd=function(){this.playerWrapper.onAdBreakEnd(),this.adUi.onAdBreakEnd()},r.prototype.onAllAdsCompleted=function(){this.adUi.onAllAdsCompleted(),this.playerWrapper.onAllAdsCompleted()},r.prototype.onAdsPaused=function(){this.adUi.onAdsPaused()},r.prototype.onAdsResumed=function(){this.adUi.onAdsResumed()},r.prototype.onAdPlayheadUpdated=function(t,e,i,n){this.adUi.updateAdUi(t,e,i,n)},r.prototype.getCurrentAd=function(){return this.sdkImpl.getCurrentAd()},r.prototype.playContent=function(){this.playerWrapper.play()},r.prototype.onLinearAdStart=function(){this.adUi.onLinearAdStart(),this.playerWrapper.onAdStart()},r.prototype.onNonLinearAdLoad=function(){this.adUi.onNonLinearAdLoad()},r.prototype.onNonLinearAdStart=function(){this.adUi.onNonLinearAdLoad(),this.playerWrapper.onAdStart()},r.prototype.getPlayerWidth=function(){return this.playerWrapper.getPlayerWidth()},r.prototype.getPlayerHeight=function(){return this.playerWrapper.getPlayerHeight()},r.prototype.onAdsReady=function(){this.playerWrapper.onAdsReady()},r.prototype.onPlayerResize=function(t,e){this.adUi.onPlayerResize(t,e)},r.prototype.onContentComplete=function(){this.sdkImpl.onContentComplete()},r.prototype.onContentAndAdsCompleted=function(){for(var t in this.contentAndAdsEndedListeners)this.contentAndAdsEndedListeners[t]()},r.prototype.onPlayerDisposed=function(){this.contentAndAdsEndedListeners=[],this.sdkImpl.onPlayerDisposed()},r.prototype.onPlayerReadyForPreroll=function(){this.sdkImpl.onPlayerReadyForPreroll()},r.prototype.onPlayerEnterFullscreen=function(){this.adUi.onPlayerEnterFullscreen(),this.sdkImpl.onPlayerEnterFullscreen()},r.prototype.onPlayerExitFullscreen=function(){this.adUi.onPlayerExitFullscreen(),this.sdkImpl.onPlayerExitFullscreen()},r.prototype.onPlayerVolumeChanged=function(t){this.adUi.onPlayerVolumeChanged(t),this.sdkImpl.onPlayerVolumeChanged(t)},r.prototype.setContentWithAdTag=function(t,e,i){this.reset(),this.settings.adTagUrl=e||this.settings.adTagUrl,this.playerWrapper.changeSource(t,i)},r.prototype.setContentWithAdsResponse=function(t,e,i){this.reset(),this.settings.adsResponse=e||this.settings.adsResponse,this.playerWrapper.changeSource(t,i)},r.prototype.reset=function(){this.sdkImpl.reset(),this.playerWrapper.reset()},r.prototype.addContentEndedListener=function(t){this.playerWrapper.addContentEndedListener(t)},r.prototype.addContentAndAdsEndedListener=function(t){this.contentAndAdsEndedListeners.push(t)},r.prototype.setShowCountdown=function(t){this.adUi.setShowCountdown(t),this.showCountdown=t,this.countdownDiv.style.display=this.showCountdown?"block":"none"},r.prototype.initializeAdDisplayContainer=function(){this.sdkImpl.initializeAdDisplayContainer()},r.prototype.playAdBreak=function(){this.sdkImpl.playAdBreak()},r.prototype.addEventListener=function(t,e){this.sdkImpl.addEventListener(t,e)},r.prototype.getAdsManager=function(){return this.sdkImpl.getAdsManager()},r.prototype.changeAdTag=function(t){this.reset(),this.settings.adTagUrl=t},r.prototype.pauseAd=function(){this.adUi.onAdsPaused(),this.sdkImpl.pauseAds()},r.prototype.resumeAd=function(){this.adUi.onAdsPlaying(),this.sdkImpl.resumeAds()},r.prototype.extend=function(t){var e,i,n;for(i=1;i<arguments.length;i++){e=arguments[i];for(n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}return t};var a=function(t,e){this.controller=new r(t,e),this.addContentAndAdsEndedListener=function(t){this.controller.addContentAndAdsEndedListener(t)}.bind(this),this.addContentEndedListener=function(t){this.controller.addContentEndedListener(t)}.bind(this),this.addEventListener=function(t,e){this.controller.addEventListener(t,e)}.bind(this),this.changeAdTag=function(t){this.controller.changeAdTag(t)}.bind(this),this.getAdsManager=function(){return this.controller.getAdsManager()}.bind(this),this.initializeAdDisplayContainer=function(){this.controller.initializeAdDisplayContainer()}.bind(this),this.pauseAd=function(){this.controller.pauseAd()}.bind(this),this.playAdBreak=function(){this.controller.playAdBreak()}.bind(this),this.requestAds=function(){this.controller.requestAds()}.bind(this),this.resumeAd=function(){this.controller.resumeAd()}.bind(this),this.setAdBreakReadyListener=function(t){this.controller.setAdBreakReadyListener()}.bind(this),this.setContentWithAdTag=function(t,e,i){this.controller.setContentWithAdTag(t,e,i)}.bind(this),this.setContentWithAdsResponse=function(t,e,i){this.controller.setContentWithAdsResponse(t,e,i)}.bind(this),this.setShowCountdown=function(t){this.controller.setShowCountdown(t)}.bind(this),this.startFromAdsManagerLoadedCallback=function(){this.controller.onPlayerReadyForPreroll()}.bind(this)};a.VERSION="1.0.0";(i.registerPlugin||i.plugin)("ima",function(t){this.ima=new a(this,t)})});